# robloxtest
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.7.0-rc.1.

## Getting Started
To build the place from scratch, use:

```bash
rojo build -o "robloxtest.rbxlx"
```

Next, open `robloxtest.rbxlx` in Roblox Studio and start the Rojo server:

```bash
rojo serve
```

For more help, check out [the Rojo documentation](https://rojo.space/docs).

## GUI Hierarchy & Controller Mapping
The current `PlayerGui` tree (captured from runtime) and the modules controlling each element:

```
PlayerGui [PlayerGui]
	Freecam [ScreenGui]
		FreecamScript [LocalScript]
	ActionsGui [ScreenGui]
		Frame [Frame]
			UIGridLayout [UIGridLayout]
			ShootButton [TextButton]
				Frame
					ClickSound [Sound]
					Main [Frame]
						UICorner [UICorner]
						UIGradient [UIGradient]
						TextLabel [TextLabel]
					Shadow [Frame]
						UICorner [UICorner]
			RunButton [TextButton]
				(same nested structure as ShootButton)
			ResetButton [TextButton]
				(same nested structure as ShootButton)
	StaminaGui [ScreenGui]
		StaminaBarBackground [Frame]
			StaminaFill [Frame]
	HealthGui [ScreenGui]
		HealthBarBackground [Frame]
			HealthFill [Frame]
	ScoreGui [ScreenGui]
		Frame [Frame]
			TextLabel [TextLabel]
```

### Controllers → GUI Elements
| Controller | File | GUI Elements | Purpose |
|------------|------|--------------|---------|
| MenuController | `src/client/ui/MenuController.luau` | `ActionsGui.Frame.ShootButton` | Fire `ShootEvent` when clicked (uses press effect) |
| RunButtonController | `src/client/ui/RunButtonController.luau` | `ActionsGui.Frame.RunButton` | Sprint toggle + Shift key; subscribes to `SprintEvent` |
| ResetButtonController | `src/client/ui/ResetButtonController.luau` | `ActionsGui.Frame.ResetButton` | Admin-only game reset via `ResetGameEvent` |
| StaminaController | `src/client/ui/StaminaController.luau` | `StaminaGui.StaminaBarBackground.StaminaFill` | Visual stamina bar based on `SprintEvent` updates |
| HealthController | `src/client/ui/HealthController.luau` | `HealthGui.HealthBarBackground.HealthFill` | Health bar based on `HealthEvent` |
| ScoreController | `src/client/ui/ScoreController.luau` | `ScoreGui.Frame.TextLabel` | Aggregated score display via `ScoreEvent` + reset handling |

### Event Dependencies
| RemoteEvent | Produced By | Consumed By |
|-------------|-------------|------------|
| `SprintEvent` | `PlayerSprint.server.luau` | RunButtonController, StaminaController |
| `ScoreEvent` | `ScoreService.luau` | ScoreController |
| `ResetGameEvent` | ResetService / ScoreService | ResetButtonController, ScoreController |
| `HealthEvent` | `LifePointsServer.luau` | HealthController |
| `ShootEvent` | (Server listener in ShootServer) | MenuController |

### Notes & Recommendations
- Buttons share a nested visual structure (`Frame -> Main / Shadow`) used by `ButtonEffects` for press animation.
- Runtime waits (`WaitForChild`) could be removed by mapping GUIs into the filesystem (see below).
- After respawn, controllers should re-init (add a `CharacterAdded` hook in `MainClient` for UI-1 task).
- Ensure admin gating for `ResetButton` stays in controller logic, not in hierarchy.

### GUI Development Approach
**GUIs are created and maintained in Roblox Studio, NOT synced via Rojo.**

Rojo's `.model.json` format has significant limitations (no UIGradient support, limited Font support, unreliable property sync). Studio's GUI editor is the correct tool for visual design.

**Workflow:**
- Create/edit GUIs in Studio's `StarterGui`
- Export as `.rbxmx` files for backup/version control (optional)
- Write controllers in `src/client/ui/` to handle logic
- Controllers sync via Rojo, GUIs stay in Studio

See [docs/GUI_WORKFLOW.md](docs/GUI_WORKFLOW.md) for detailed guidelines.

### Initialization Flow
1. Server bootstrap (`MainServer.server.luau`) creates RemoteEvents.
2. Client `MainClient` requires controllers; each controller binds to its GUI subtree.
3. Controllers listen to events immediately (module scope where needed) before UI waits finish.
4. Reset flow uses `ResetButtonController` → server `ResetService` + `ScoreService.ResetAll()` → `ResetGameEvent` to clear HUD.

### Character Respawn Handling (UI-1) ✅
`MainClient.client.luau` includes a `CharacterAdded` hook that re-initializes all controllers after respawn to guarantee UI rebinds.

---